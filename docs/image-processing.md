# üñºÔ∏è –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å

**Catalog Master v1.2.1** –≤–∫–ª—é—á–∞—î –Ω–∞–π—Å—Ç–∞–±—ñ–ª—å–Ω—ñ—à—É —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –æ–±—Ä–æ–±–∫–∏ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å —ñ–∑ Google Sheets –∑ –ø–æ–∫—Ä–∞—â–µ–Ω–æ—é –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–æ—é —Ç–∞ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—é.

---

## üéØ **–û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏**

### **–©–æ —Ä–æ–±–∏—Ç—å —Å–∏—Å—Ç–µ–º–∞**
1. üîó **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î** –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ URL —É Google Sheets
2. üé® **–°—Ç–∞–±—ñ–ª—å–Ω–æ –æ–±—Ä–æ–±–ª—è—î —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑—É—î** - –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤ JPG
3. üìÅ **–û—Ä–≥–∞–Ω—ñ–∑–æ–≤—É—î –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫** –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
4. üîÑ **–ö–µ—à—É—î –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó** - —É–Ω–∏–∫–∞—î –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
5. üìä **–õ–æ–≥—É—î –≤—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó** –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
6. üß™ **–Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏** –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### **–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ç–∏–ø–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å**
- üñºÔ∏è **–í—Ö—ñ–¥–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏:** JPG, PNG, GIF, WebP, BMP, AVIF, TGA
- üì§ **–í–∏—Ö—ñ–¥–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç:** JPG (90% —è–∫—ñ—Å—Ç—å)
- üìê **–¶—ñ–ª—å–æ–≤–∏–π —Ä–æ–∑–º—ñ—Ä:** **–ó–ê–í–ñ–î–ò 1000x1000px** (–∑ –∫—Ä–æ–ø–æ–º) - **—Å—Ç–∞–±—ñ–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ v1.2.1**

### **üéØ –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ v1.2.1**
- **‚úÖ –°—Ç–∞–±—ñ–ª—å–Ω–∏–π —Ä–µ—Å–∞–π–∑** - –∑–∞–≤–∂–¥–∏ 1000x1000px –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É
- **üõ°Ô∏è –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ E_ERROR –ø–æ–º–∏–ª–∫–∏** - –Ω–∞–¥—ñ–π–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∑–±–æ—ó–≤
- **üß™ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏** - –≤–±—É–¥–æ–≤–∞–Ω—ñ –≤ WordPress –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
- **üìä Fallback –º–µ—Ö–∞–Ω—ñ–∑–º–∏** - —Ä–µ–∑–µ—Ä–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ –æ–±—Ä–æ–±–∫–∏ –ø—Ä–∏ –∑–±–æ—è—Ö

---

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ**

```
/wp-content/uploads/catalog-master-images/
‚îî‚îÄ‚îÄ catalog-{ID}/                    ‚Üê ID –∫–∞—Ç–∞–ª–æ–≥—É
    ‚îú‚îÄ‚îÄ products/                    ‚Üê –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ product_123.jpg          ‚Üê product_id.jpg
    ‚îÇ   ‚îú‚îÄ‚îÄ product_456.jpg
    ‚îÇ   ‚îî‚îÄ‚îÄ product_789.jpg
    ‚îî‚îÄ‚îÄ categories/                  ‚Üê –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
        ‚îú‚îÄ‚îÄ electronics.jpg          ‚Üê category_id_1.jpg
        ‚îú‚îÄ‚îÄ phones.jpg               ‚Üê category_id_2.jpg  
        ‚îî‚îÄ‚îÄ laptops.jpg              ‚Üê category_id_3.jpg
```

### **–ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤**
- **–¢–æ–≤–∞—Ä–∏:** `{product_id}.jpg` - —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID —Ç–æ–≤–∞—Ä—É
- **–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó:** `{category_id_1}.jpg` - ID –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–µ—Ä—à–æ–≥–æ —Ä—ñ–≤–Ω—è
- **Fallback:** `product_{row_number}.jpg` —è–∫—â–æ –Ω–µ–º–∞—î ID

---

## üîß **–¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**

### **–ì–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –æ–±—Ä–æ–±–∫–∏**
```php
private static function download_and_process_image(
    $image_url,           // URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ Google Sheets
    $catalog_id,          // ID –∫–∞—Ç–∞–ª–æ–≥—É
    $filename_base,       // –ë–∞–∑–æ–≤–µ —ñ–º'—è —Ñ–∞–π–ª—É (product_id –∞–±–æ category_id)
    $type = 'product',    // 'product' –∞–±–æ 'category'
    $target_width = 1000, // –¶—ñ–ª—å–æ–≤–∞ —à–∏—Ä–∏–Ω–∞
    $target_height = 1000 // –¶—ñ–ª—å–æ–≤–∞ –≤–∏—Å–æ—Ç–∞
) {
    // 1. –í–∞–ª—ñ–¥–∞—Ü—ñ—è URL
    if (!filter_var($image_url, FILTER_VALIDATE_URL)) {
        return '';
    }
    
    // 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø–∞–ø–æ–∫
    $upload_dir = wp_upload_dir();
    $sub_dir = ($type === 'product') ? 'products/' : 'categories/';
    $target_dir = $upload_dir['basedir'] . '/catalog-master-images/catalog-' . $catalog_id . '/' . $sub_dir;
    
    // 3. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ —Ç–∏–º—á–∞—Å–æ–≤–∏–π —Ñ–∞–π–ª
    $temp_file = download_url($image_url, 300); // 5 —Ö–≤–∏–ª–∏–Ω timeout
    
    // 4. –û–±—Ä–æ–±–∫–∞ —á–µ—Ä–µ–∑ WordPress Image Editor
    $image_editor = wp_get_image_editor($temp_file);
    $image_editor->set_quality(90);
    $image_editor->resize($target_width, $target_height, true); // true = crop
    
    // 5. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —è–∫ JPG
    $final_filename = sanitize_file_name($filename_base) . '.jpg';
    $saved = $image_editor->save($target_dir . $final_filename, 'image/jpeg');
    
    // 6. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è URL
    return $upload_dir['baseurl'] . '/catalog-master-images/catalog-' . $catalog_id . '/' . $sub_dir . $final_filename;
}
```

### **–†–æ–∑—É–º–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π**
```php
// –£ —Ñ—É–Ω–∫—Ü—ñ—ó process_data_chunk_for_import
if ($image_type === 'category') {
    // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∫–µ—à
    if (isset($updated_image_cache[$original_value])) {
        $item[$catalog_column] = $updated_image_cache[$original_value];
    } else {
        // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ç–∞ –∫–µ—à—É—î–º–æ
        $local_image_url = self::download_and_process_image(...);
        if (!empty($local_image_url)) {
            $updated_image_cache[$original_value] = $local_image_url;
        }
        $item[$catalog_column] = $local_image_url;
    }
}
```

### **üéØ –°—Ç–∞–±—ñ–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Ä–µ—Å–∞–π–∑—É (v1.2.1)**
```php
// ‚úÖ –û–ù–û–í–õ–ï–ù–ê –õ–û–ì–Ü–ö–ê - –∑–∞–≤–∂–¥–∏ —Ä–µ—Å–∞–π–∑–∏–º–æ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É
private function process_uploaded_image($file_path, $target_width = 1000, $target_height = 1000) {
    
    // –û—Ç—Ä–∏–º—É—î–º–æ —Ä–æ–∑–º—ñ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    $image_info = getimagesize($file_path);
    if ($image_info === false) {
        throw new Exception('–ù–µ –º–æ–∂—É –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è');
    }
    
    $current_size = array(
        'width' => $image_info[0],
        'height' => $image_info[1]
    );
    
    CatalogMaster_Logger::info('üé® Processing image', array(
        'current_size' => $current_size['width'] . 'x' . $current_size['height'],
        'target_size' => $target_width . 'x' . $target_height,
        'will_resize' => 'YES (ALWAYS)' // ‚Üê –ó–∞–≤–∂–¥–∏ —Ä–µ—Å–∞–π–∑–∏–º–æ!
    ));
    
    // Set quality and resize - –ó–ê–í–ñ–î–ò –≤–∏–∫–æ–Ω—É—î–º–æ —Ä–µ—Å–∞–π–∑
    $image_editor->set_quality(90);
    $resized = $image_editor->resize($target_width, $target_height, true); // true for crop
    
    if (is_wp_error($resized)) {
        CatalogMaster_Logger::error('‚ùå Resize failed', array(
            'error_message' => $resized->get_error_message(),
            'target_size' => $target_width . 'x' . $target_height,
            'original_size' => $current_size['width'] . 'x' . $current_size['height']
        ));
        throw new Exception('–ü–æ–º–∏–ª–∫–∞ –∑–º—ñ–Ω–∏ —Ä–æ–∑–º—ñ—Ä—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è: ' . $resized->get_error_message());
    }
    
    CatalogMaster_Logger::info('‚úÖ Image resized successfully', array(
        'from' => $current_size['width'] . 'x' . $current_size['height'],
        'to' => $target_width . 'x' . $target_height
    ));
}
```

### **üõ°Ô∏è –ë–µ–∑–ø–µ—á–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å (v1.2.1)**
```php
// ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–Ü —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑ E_ERROR –ø–æ–º–∏–ª–æ–∫
private function render_image_diagnostics() {
    
    // –ë–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ WordPress Image Editor
    $available_editors = wp_image_editor_supports();
    if (!empty($available_editors) && is_array($available_editors)) {
        echo '<span style="color: green;">‚úÖ –î–æ—Å—Ç—É–ø–Ω—ñ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∏: ' . implode(', ', array_keys($available_editors)) . '</span>';
    } else {
        echo '<span style="color: red;">‚ùå –ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ–≤</span>';
        if ($available_editors !== false && !is_array($available_editors)) {
            echo '<br><small>–ù–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Ç–∏–ø –¥–∞–Ω–∏—Ö: ' . gettype($available_editors) . '</small>';
        }
    }
    
    // –ë–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ GD info
    if (extension_loaded('gd')) {
        $gd_info = gd_info();
        if ($gd_info && is_array($gd_info) && isset($gd_info['GD Version'])) {
            echo '<br><small>–í–µ—Ä—Å—ñ—è: ' . $gd_info['GD Version'] . '</small>';
        } else {
            echo '<br><small>–í–µ—Ä—Å—ñ—è: –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</small>';
        }
        
        // –ë–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—ñ–≤
        $formats = array();
        if (is_array($gd_info)) {
            if (isset($gd_info['JPEG Support']) && $gd_info['JPEG Support']) $formats[] = 'JPEG';
            if (isset($gd_info['PNG Support']) && $gd_info['PNG Support']) $formats[] = 'PNG';
            if (isset($gd_info['GIF Create Support']) && $gd_info['GIF Create Support']) $formats[] = 'GIF';
            if (isset($gd_info['WebP Support']) && $gd_info['WebP Support']) $formats[] = 'WebP';
            if (isset($gd_info['AVIF Support']) && $gd_info['AVIF Support']) $formats[] = 'AVIF';
        }
        echo '–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏: ' . implode(', ', $formats);
    }
    
    // –ë–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ ImageMagick
    if (class_exists('Imagick')) {
        try {
            $imagick = new Imagick();
            $version = $imagick->getVersion();
            if (is_array($version) && isset($version['versionString'])) {
                echo '<br><small>' . $version['versionString'] . '</small>';
            } else {
                echo '<br><small>–í–µ—Ä—Å—ñ—è ImageMagick: –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</small>';
            }
            $imagick->destroy();
        } catch (Exception $e) {
            echo '<br><small>–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–µ—Ä—Å—ñ—ó ImageMagick</small>';
        }
    }
}
```

---

## üìä **–ú–∞–ø—ñ–Ω–≥ —Å—Ç–æ–≤–ø—Ü—ñ–≤ –∑–æ–±—Ä–∞–∂–µ–Ω—å**

### **–°—Ç–æ–≤–ø—Ü—ñ —â–æ –æ–±—Ä–æ–±–ª—é—é—Ç—å—Å—è —è–∫ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è**
```php
// –†–æ–∑–ø—ñ–∑–Ω–∞–Ω–Ω—è —Å—Ç–æ–≤–ø—Ü—ñ–≤ –∑–æ–±—Ä–∞–∂–µ–Ω—å
if ($catalog_column === 'product_image_url' || strpos($catalog_column, 'category_image_') === 0) {
    
    // –û–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
}
```

### **–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –ø–æ–ª—è**
- `product_image_url` ‚Üí `/products/product_id.jpg`
- `category_image_1` ‚Üí `/categories/category_id_1.jpg`
- `category_image_2` ‚Üí `/categories/category_id_2.jpg`  
- `category_image_3` ‚Üí `/categories/category_id_3.jpg`

---

## üé® **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å**

### **–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (v1.2.1)**
```php
$target_width = 1000;    // 1000px —à–∏—Ä–∏–Ω–∞ (–ó–ê–í–ñ–î–ò –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è)
$target_height = 1000;   // 1000px –≤–∏—Å–æ—Ç–∞ (–ó–ê–í–ñ–î–ò –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è)  
$quality = 90;           // 90% —è–∫—ñ—Å—Ç—å JPG
$crop = true;            // –û–±—Ä—ñ–∑–∫–∞ –∑—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π
$always_resize = true;   // ‚Üê –ù–û–í–ê –ª–æ–≥—ñ–∫–∞: —Ä–µ—Å–∞–π–∑ –ó–ê–í–ñ–î–ò!
```

### **üéØ –°—Ç–∞–±—ñ–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –æ–±—Ä–æ–±–∫–∏**
```php
// v1.2.1: –ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ–Ω—É—î–º–æ —Ä–µ—Å–∞–π–∑ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É
CatalogMaster_Logger::info('üé® Processing image', array(
    'current_size' => $current_size['width'] . 'x' . $current_size['height'],
    'target_size' => $target_width . 'x' . $target_height,
    'will_resize' => 'YES (ALWAYS)' // ‚Üê –°—Ç–∞–±—ñ–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞
));

// –ü—Ä–∏–º—É—Å–æ–≤–∏–π —Ä–µ—Å–∞–π–∑ –¥–ª—è –≤—Å—ñ—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
$resized = $image_editor->resize($target_width, $target_height, true);
```

### **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏**
```php
// –£ wp-config.php
define('CATALOG_MASTER_IMAGE_WIDTH', 1200);     // –ö–∞—Å—Ç–æ–º–Ω–∞ —à–∏—Ä–∏–Ω–∞
define('CATALOG_MASTER_IMAGE_HEIGHT', 1200);    // –ö–∞—Å—Ç–æ–º–Ω–∞ –≤–∏—Å–æ—Ç–∞
define('CATALOG_MASTER_IMAGE_QUALITY', 85);     // –ö–∞—Å—Ç–æ–º–Ω–∞ —è–∫—ñ—Å—Ç—å
```

### **–•—É–∫–∏ –¥–ª—è fine-tuning**
```php
// –§—ñ–ª—å—Ç—Ä–∏ –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤
add_filter('catalog_master_image_target_size', function($size, $type) {
    if ($type === 'category') {
        return ['width' => 800, 'height' => 800]; // –ú–µ–Ω—à—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
    }
    return $size;
}, 10, 2);

add_filter('catalog_master_image_process_quality', function($quality, $type) {
    return $type === 'product' ? 95 : 85; // –í–∏—â–∞ —è–∫—ñ—Å—Ç—å –¥–ª—è —Ç–æ–≤–∞—Ä—ñ–≤
}, 10, 2);
```

---

## üîÑ **–°–∏—Å—Ç–µ–º–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å**

### **–ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏**
1. **–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π** —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—é—é—Ç—å—Å—è –¥–ª—è –±–∞–≥–∞—Ç—å–æ—Ö —Ç–æ–≤–∞—Ä—ñ–≤
2. **–ö–µ—à –∑–±–µ—Ä—ñ–≥–∞—î** –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å: `URL_–∑_Google_Sheets ‚Üí URL_–Ω–∞_—Å–µ—Ä–≤–µ—Ä—ñ`
3. **–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É URL** - –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≥–æ—Ç–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
4. **–ï–∫–æ–Ω–æ–º—ñ—è:** —Ç—Ä–∞—Ñ—ñ–∫—É, —á–∞—Å—É –æ–±—Ä–æ–±–∫–∏, –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–µ—à—É**
```php
$category_image_cache = [
    'https://example.com/category1.jpg' => '/wp-content/uploads/.../electronics.jpg',
    'https://example.com/category2.jpg' => '/wp-content/uploads/.../phones.jpg',
    // ... —ñ–Ω—à—ñ –∫–µ—à–æ–≤–∞–Ω—ñ URL
];
```

### **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–µ—à–µ–º**
```php
// –ü–æ—á–∞—Ç–æ–∫ —ñ–º–ø–æ—Ä—Ç—É - –ø–æ—Ä–æ–∂–Ω—ñ–π –∫–µ—à
set_transient($cache_key, array(), HOUR_IN_SECONDS);

// –ü—ñ–¥ —á–∞—Å –±–∞—Ç—á—É - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–µ—à—É
set_transient($cache_key, $updated_cache, HOUR_IN_SECONDS);

// –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è —ñ–º–ø–æ—Ä—Ç—É - –æ—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É
delete_transient($cache_key);
```

---

## üö® **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫**

### **–¢–∏–ø–∏ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ —Ä–µ–∞–∫—Ü—ñ—è**
```php
// –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π URL
if (!filter_var($image_url, FILTER_VALIDATE_URL)) {
    CatalogMaster_Logger::warning("Invalid image URL: {$image_url}");
    return '';
}

// –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
if (is_wp_error($temp_file)) {
    CatalogMaster_Logger::error("Download failed: " . $temp_file->get_error_message());
    return '';
}

// –ü–æ–º–∏–ª–∫–∞ –æ–±—Ä–æ–±–∫–∏
if (is_wp_error($image_editor)) {
    CatalogMaster_Logger::error("Image editor failed: " . $image_editor->get_error_message());
    return '';
}

// –ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è
if (!$saved || is_wp_error($saved)) {
    CatalogMaster_Logger::error("Save failed for: {$image_url}");
    return '';
}
```

### **Fallback —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è**
- ‚ùå **–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏** ‚Üí –ø–æ—Ä–æ–∂–Ω—î –ø–æ–ª–µ, –ø—Ä–æ–¥–æ–≤–∂—É—î–º–æ —ñ–º–ø–æ—Ä—Ç
- ‚ùå **–ù–µ –≤–¥–∞–ª–æ—Å—è –æ–±—Ä–æ–±–∏—Ç–∏** ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π URL
- ‚úÖ **Graceful degradation** - —ñ–º–ø–æ—Ä—Ç –Ω–µ –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

---

## üìà **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–æ–±–∫–∏**
```php
// –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
CatalogMaster_Logger::info("Image processed and saved", [
    'final_url' => $final_url,
    'original_url' => $image_url,
    'file_size_before' => filesize($temp_file),
    'file_size_after' => filesize($final_path),
    'processing_time' => $end_time - $start_time
]);
```

### **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –∫–∞—Ç–∞–ª–æ–≥—ñ–≤**
1. **Timeout –∑–±—ñ–ª—å—à–µ–Ω–æ** –¥–æ 300 —Å–µ–∫—É–Ω–¥ (5 —Ö–≤–∏–ª–∏–Ω)
2. **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞** –≤ –º–µ–∂–∞—Ö –±–∞—Ç—á—É
3. **–ö–µ—à—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π** - –µ–∫–æ–Ω–æ–º—ñ—è –¥–æ 80% –æ–ø–µ—Ä–∞—Ü—ñ–π
4. **Compression JPG** - –µ–∫–æ–Ω–æ–º—ñ—è –¥–æ 60% –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø–æ —Ä–æ–∑–º—ñ—Ä–∞—Ö**
| –¢–∏–ø —Ç–æ–≤–∞—Ä—É | –†–æ–∑–º—ñ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è | –Ø–∫—ñ—Å—Ç—å | –ü—Ä–∏–±–ª–∏–∑–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É |
|------------|------------------|--------|------------------------|
| –ï–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∞ | 1000x1000 | 90% | 80-150KB |
| –û–¥—è–≥ | 800x800 | 85% | 60-120KB |
| –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó | 600x600 | 80% | 40-80KB |

---

## üß™ **–Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ (v1.2.1)**

### **üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å**
–î–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ **WordPress Admin ‚Üí Catalog Master ‚Üí –õ–æ–≥–∏ —Ç–∞ –¥–µ–±–∞–≥**

#### **üìä –°–∏—Å—Ç–µ–º–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è**
```
üìä –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å–µ—Ä–≤–µ—Ä:
‚Ä¢ –í–µ—Ä—Å—ñ—è PHP: 8.2.28  
‚Ä¢ –û–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞: Linux 6.1.0
‚Ä¢ Memory Limit: 512M
‚Ä¢ Max Execution Time: 300 —Å–µ–∫—É–Ω–¥

üì¶ –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å:
‚Ä¢ GD Extension: ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (–í–µ—Ä—Å—ñ—è: bundled 2.1.0)
‚Ä¢ ImageMagick Extension: ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ (ImageMagick 6.9.11-60)
‚Ä¢ –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏: JPEG, PNG, GIF, WebP, AVIF
```

#### **üß™ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ç–µ—Å—Ç—É—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å:
```
üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å:
‚Ä¢ GD —Ç–µ—Å—Ç: ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è JPEG –ø—Ä–∞—Ü—é—î (623 –±–∞–π—Ç)
‚Ä¢ ImageMagick —Ç–µ—Å—Ç: ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è JPEG –ø—Ä–∞—Ü—é—î (892 –±–∞–π—Ç)  
‚Ä¢ WordPress Image Editor —Ç–µ—Å—Ç: ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ñ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∏: WP_Image_Editor_Imagick, WP_Image_Editor_GD

üèÅ –í–∏—Å–Ω–æ–≤–æ–∫:
‚úÖ –°–µ—Ä–≤–µ—Ä –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç—Ä–∏–º—É—î –æ–±—Ä–æ–±–∫—É –∑–æ–±—Ä–∞–∂–µ–Ω—å!
üéâ –î–æ—Å—Ç—É–ø–Ω—ñ –æ–±–∏–¥–≤–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∏ (GD —Ç–∞ ImageMagick)
```

### **üéØ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å**
–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –æ–±—Ä–æ–±–∫–∏:

#### **–©–æ —Ç–µ—Å—Ç—É—î—Ç—å—Å—è:**
1. ‚úÖ **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É** —á–µ—Ä–µ–∑ $_FILES
2. ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è** —Ç–∞ —á–∏—Ç–∞–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ —Ñ–∞–π–ª—É  
3. ‚úÖ **–§—É–Ω–∫—Ü—ñ—è getimagesize()** –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
4. ‚úÖ **WordPress Image Editor** (wp_get_image_editor)
5. ‚úÖ **–ü—Ä–∏–º—É—Å–æ–≤–∞ –∑–º—ñ–Ω–∞ —Ä–æ–∑–º—ñ—Ä—É** –¥–æ 100x100 –ø—ñ–∫—Å–µ–ª—ñ–≤ (—Ç–µ—Å—Ç; –≤ —Ä–µ–∞–ª—å–Ω—ñ–π —Ä–æ–±–æ—Ç—ñ - 1000x1000)
6. ‚úÖ **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ —Ñ–æ—Ä–º–∞—Ç—ñ JPEG** –∑ —è–∫—ñ—Å—Ç—é 90%
7. ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É** –¥–æ –ø–∞–ø–∫–∏ uploads

#### **–ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
```
üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

1Ô∏è‚É£ –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ñ–∞–π–ª:
‚Ä¢ –ù–∞–∑–≤–∞: test-image.jpg
‚Ä¢ –†–æ–∑–º—ñ—Ä: 156,742 –±–∞–π—Ç (153.1 KB)
‚Ä¢ MIME —Ç–∏–ø: image/jpeg
‚Ä¢ –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: –ù–µ–º–∞—î ‚úÖ

2Ô∏è‚É£ –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—É:
‚Ä¢ –§–∞–π–ª —ñ—Å–Ω—É—î: –¢–∞–∫ ‚úÖ
‚Ä¢ –§–∞–π–ª —á–∏—Ç–∞—î—Ç—å—Å—è: –¢–∞–∫ ‚úÖ
‚Ä¢ –†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É: 156,742 –±–∞–π—Ç

3Ô∏è‚É£ –¢–µ—Å—Ç getimagesize():
‚úÖ –£—Å–ø—ñ—à–Ω–æ!
‚Ä¢ –®–∏—Ä–∏–Ω–∞: 1200 px
‚Ä¢ –í–∏—Å–æ—Ç–∞: 800 px
‚Ä¢ MIME —Ç–∏–ø: image/jpeg

4Ô∏è‚É£ –¢–µ—Å—Ç WordPress Image Editor:
‚úÖ wp_get_image_editor(): –£—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ
‚Ä¢ –†–æ–∑–º—ñ—Ä –∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞: 1200x800
‚Ä¢ –¢–µ—Å—Ç –∑–º—ñ–Ω–∏ —Ä–æ–∑–º—ñ—Ä—É: 1200x800 ‚Üí 100x100 (–∑–∞–≤–∂–¥–∏ —Ä–µ—Å–∞–π–∑–∏–º–æ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É)
‚úÖ –ó–º—ñ–Ω–∞ —Ä–æ–∑–º—ñ—Ä—É: –£—Å–ø—ñ—à–Ω–æ
‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è: –£—Å–ø—ñ—à–Ω–æ (4,892 –±–∞–π—Ç)

üèÅ –í–∏—Å–Ω–æ–≤–æ–∫:
üéâ –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ!
```

### **üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤**
```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
setTimeout(function() { 
    fetch("/wp-admin/admin-ajax.php", {
        method: "POST",
        headers: {"Content-Type": "application/x-www-form-urlencoded"},
        body: "action=catalog_master_cleanup_test_image&path=..."
    });
}, 5000);
```

### **üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**

#### **‚úÖ –Ø–∫—â–æ –≤—Å—ñ —Ç–µ—Å—Ç–∏ —É—Å–ø—ñ—à–Ω—ñ:**
```
üéâ –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ!
–í–∞—à —Å–µ—Ä–≤–µ—Ä –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—ñ–¥—Ç—Ä–∏–º—É—î –æ–±—Ä–æ–±–∫—É –∑–æ–±—Ä–∞–∂–µ–Ω—å. 
–Ø–∫—â–æ –≤ –ø–ª–∞–≥—ñ–Ω—ñ —î –ø—Ä–æ–±–ª–µ–º–∏, –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–æ–≤'—è–∑–∞–Ω—ñ –∑:
‚Ä¢ –ü—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø–∞–ø–æ–∫ –∫–∞—Ç–∞–ª–æ–≥—É
‚Ä¢ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ –±–µ–∑–ø–µ–∫–∏ WordPress  
‚Ä¢ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—è–º–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ –∑–æ–±—Ä–∞–∂–µ–Ω—å
```

#### **‚ùå –Ø–∫—â–æ —î –ø—Ä–æ–±–ª–µ–º–∏:**
```
‚ùå –í–∏—è–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –æ–±—Ä–æ–±–∫–æ—é –∑–æ–±—Ä–∞–∂–µ–Ω—å
–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∏—â–µ–Ω–∞–≤–µ–¥–µ–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–∞ –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞.

–¢–∏–ø–æ–≤—ñ —Ä—ñ—à–µ–Ω–Ω—è:
‚Ä¢ –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ GD –∞–±–æ ImageMagick —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è PHP
‚Ä¢ –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–∞–ø–∫–∏ uploads  
‚Ä¢ –ó–±—ñ–ª—å—à–∏—Ç–∏ memory_limit –≤ PHP
‚Ä¢ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ñ—É–Ω–∫—Ü—ñ–π getimagesize()
```

---

## üõ†Ô∏è **–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–∞ –≤—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è**

### **–õ–æ–≥–∏ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å**
```php
// –£ CatalogMaster_Logger
CatalogMaster_Logger::info("üñºÔ∏è Starting image processing", [
    'url' => $image_url,
    'type' => $type,
    'filename' => $filename_base
]);

CatalogMaster_Logger::info("‚úÖ Image processed successfully", [
    'local_url' => $local_url,
    'file_size' => filesize($local_path)
]);
```

### **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø–∞–ø–æ–∫**
```bash
# SSH –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
ls -la /wp-content/uploads/catalog-master-images/
du -sh /wp-content/uploads/catalog-master-images/catalog-*/
find /wp-content/uploads/catalog-master-images/ -name "*.jpg" | wc -l
```

### **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É**
```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –ø—Ä–∞–≤–∞ –¥–ª—è –ø–∞–ø–æ–∫ —Ç–∞ —Ñ–∞–π–ª—ñ–≤
chmod 755 /wp-content/uploads/catalog-master-images/
chmod 755 /wp-content/uploads/catalog-master-images/catalog-*/
chmod 755 /wp-content/uploads/catalog-master-images/catalog-*/products/
chmod 755 /wp-content/uploads/catalog-master-images/catalog-*/categories/
chmod 644 /wp-content/uploads/catalog-master-images/catalog-*/*/*.jpg
```

---

## üîß **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è WordPress**

### **–ù–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è PHP**
```ini
extension=gd          ; –û–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å
extension=imagick     ; –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π —Ä–µ–¥–∞–∫—Ç–æ—Ä (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
extension=exif        ; –ú–µ—Ç–∞–¥–∞–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω—å
```

### **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è upload**
```ini
upload_max_filesize = 50M    ; –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
post_max_size = 50M          ; POST –¥–∞–Ω—ñ
memory_limit = 256M          ; –û–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤–∏–º–∞–≥–∞—î –ø–∞–º º—è—Ç—ñ
```

### **WordPress –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏**
```php
// –£ wp-config.php
define('WP_MEMORY_LIMIT', '256M');
define('WP_MAX_MEMORY_LIMIT', '512M');
```

---

## üéØ **–ù–∞–π–∫—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏**

### **–î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**
1. ‚úÖ **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —è–∫—ñ—Å–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è** - –º—ñ–Ω—ñ–º—É–º 800x800px
2. ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ URL** - –≤–æ–Ω–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –ø—É–±–ª—ñ—á–Ω–æ
3. ‚úÖ **–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥—É–∂–µ –≤–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏** - –ø–æ–Ω–∞–¥ 10MB
4. ‚úÖ **–£–Ω—ñ–∫–∞–ª—å–Ω—ñ —ñ–º–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π** - –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –∫–µ—à—É–≤–∞–Ω–Ω—è

### **–î–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤**
1. ‚úÖ **–ú–æ–Ω—ñ—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏** –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å
2. ‚úÖ **–¢–µ—Å—Ç—É–π—Ç–µ —Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏** –≤—Ö—ñ–¥–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
3. ‚úÖ **–ù–∞–ª–∞—à—Ç–æ–≤—É–π—Ç–µ —è–∫—ñ—Å—Ç—å** –ø—ñ–¥ –ø–æ—Ç—Ä–µ–±–∏ –ø—Ä–æ–µ–∫—Ç—É
4. ‚úÖ **–û—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è** –ø—Ä–∏ –∑–º—ñ–Ω—ñ –∫–∞—Ç–∞–ª–æ–≥—ñ–≤

### **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**
```php
// –ö–∞—Å—Ç–æ–º–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –æ—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
function cleanup_old_catalog_images($catalog_id) {
    $catalog_dir = wp_upload_dir()['basedir'] . '/catalog-master-images/catalog-' . $catalog_id;
    if (file_exists($catalog_dir)) {
        // Recursive delete
        array_map('unlink', glob("$catalog_dir/*/*.jpg"));
        rmdir($catalog_dir . '/products');
        rmdir($catalog_dir . '/categories');
        rmdir($catalog_dir);
    }
}
```

---

## üîÆ **–ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è**

### **üéØ –ó–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–æ –¥–ª—è v1.3.x**
- üñºÔ∏è **WebP –ø—ñ–¥—Ç—Ä–∏–º–∫–∞** - —Å—É—á–∞—Å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑ –∫—Ä–∞—â–∏–º —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è–º
- üé® **Multiple sizes** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è thumbnails, medium, large
- üìä **Bulk optimization** - –º–∞—Å–æ–≤–∞ –ø–µ—Ä–µ–æ–±—Ä–æ–±–∫–∞ —ñ—Å–Ω—É—é—á–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
- üöÄ **Background processing** - –æ–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤ —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ

### **ü§ñ Advanced —Ñ—É–Ω–∫—Ü—ñ—ó v1.4.x+**
- üß† **AI –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∫–∞–¥—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ
- üè∑Ô∏è **Auto-tagging** - —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è—Ö —á–µ—Ä–µ–∑ ML
- üé≠ **Smart watermarks** - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ñ –≤–æ–¥—è–Ω—ñ –∑–Ω–∞–∫–∏
- üìà **Performance metrics** - –¥–µ—Ç–∞–ª—å–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å

### **‚úÖ –í–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ v1.2.1**
- ‚úÖ **–°—Ç–∞–±—ñ–ª—å–Ω–∏–π —Ä–µ—Å–∞–π–∑** - –∑–∞–≤–∂–¥–∏ 1000x1000px
- ‚úÖ **–ù–∞–¥—ñ–π–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –±–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫
- ‚úÖ **–Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤ WordPress –∞–¥–º—ñ–Ω
- ‚úÖ **Fallback –º–µ—Ö–∞–Ω—ñ–∑–º–∏** - —Ä–µ–∑–µ—Ä–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ –æ–±—Ä–æ–±–∫–∏

---

## üêõ **–¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è**

### **üõ°Ô∏è –í–ò–ü–†–ê–í–õ–ï–ù–û —É v1.2.1: –ö—Ä–∏—Ç–∏—á–Ω–∞ E_ERROR –ø–æ–º–∏–ª–∫–∞**

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞ (–¥–æ v1.2.1):**
```
–ü–æ–º–∏–ª–∫–∞ –∑ —Ç–∏–ø–æ–º E_ERROR –≤–∏–Ω–∏–∫–ª–∞ –Ω–∞ —Ä—è–¥–∫—É 1221 —Ñ–∞–π–ª—É class-admin.php
Uncaught TypeError: array_keys(): Argument #1 ($array) must be of type array, bool given
```

**–ü—Ä–∏—á–∏–Ω–∞:**
```php
// ‚ùå –ü–†–û–ë–õ–ï–ú–ù–ò–ô –∫–æ–¥ - –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∏–ø—ñ–≤:
$available_editors = wp_image_editor_supports();
echo implode(', ', array_keys($available_editors)); // ‚Üê –ö—Ä–∏—Ç–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞!

$gd_info = gd_info();
echo $gd_info['GD Version']; // ‚Üê –ú–æ–∂–µ –±—É—Ç–∏ –Ω–µ-–º–∞—Å–∏–≤!
```

**‚úÖ –í–∏—Ä—ñ—à–µ–Ω–Ω—è —É v1.2.1:**
```php
// ‚úÖ –ë–ï–ó–ü–ï–ß–ù–ò–ô –∫–æ–¥ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —Ç–∏–ø—ñ–≤:
$available_editors = wp_image_editor_supports();
if (!empty($available_editors) && is_array($available_editors)) {
    echo implode(', ', array_keys($available_editors));
} else {
    echo '–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ–≤';
    if ($available_editors !== false && !is_array($available_editors)) {
        echo '<br>–ù–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Ç–∏–ø –¥–∞–Ω–∏—Ö: ' . gettype($available_editors);
    }
}

// –ë–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ GD
$gd_info = gd_info();
if ($gd_info && is_array($gd_info) && isset($gd_info['GD Version'])) {
    echo $gd_info['GD Version'];
} else {
    echo '–í–µ—Ä—Å—ñ—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üõ°Ô∏è **–ù—ñ—è–∫–∏—Ö –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫** - —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∂–¥–∏ –ø—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ
- üìä **Fallback –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è** - —ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- üß™ **–ù–∞–¥—ñ–π–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î –Ω–∞ –≤—Å—ñ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ**

**–°–∏–º–ø—Ç–æ–º–∏:**
- –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ –ø—Ä–∞—Ü—é—é—Ç—å (–ª–æ–∫–∞–ª—å–Ω—ñ URL –≤ –µ–∫—Å–ø–æ—Ä—Ç—ñ)
- –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –ù–ï –ø—Ä–∞—Ü—é—é—Ç—å (–∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –∑–æ–≤–Ω—ñ—à–Ω—ñ URL)
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ fallback —ñ–º–µ–Ω–∞ —Ñ–∞–π–ª—ñ–≤: `category1_123.jpg` –∑–∞–º—ñ—Å—Ç—å `electronics.jpg`

**–ü—Ä–∏—á–∏–Ω–∞:**
```php
// –ü–†–û–ë–õ–ï–ú–ù–ò–ô –ø–æ—Ä—è–¥–æ–∫ –º–∞–ø—ñ–Ω–≥—É:
category_image_1 ‚Üí Electronics Image    // –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –ü–ï–†–®–ò–ú
category_id_1    ‚Üí Category ID          // –û–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –î–†–£–ì–ò–ú

// –í –º–æ–º–µ–Ω—Ç –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, category_id_1 —â–µ –ø–æ—Ä–æ–∂–Ω—ñ–π!
```

**‚úÖ –í–∏—Ä—ñ—à–µ–Ω–Ω—è (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —É v1.1.0):**
–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä –æ—Ç—Ä–∏–º—É—î `category_id` –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ —Å–∏—Ä–∏—Ö –¥–∞–Ω–∏—Ö —Ä—è–¥–∫–∞, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ—Ä—è–¥–∫—É —Å—Ç–æ–≤–ø—Ü—ñ–≤ –≤ –º–∞–ø—ñ–Ω–≥—É.

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ –ª–æ–≥–∏:**
```php
üñºÔ∏è Processing category image: {
    "catalog_column": "category_image_1",
    "category_id_key": "category_id_1", 
    "category_id_raw": "electronics",     // ‚Üê –¢–µ–ø–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å
    "filename_base": "electronics",       // ‚Üê –ü—Ä–∞–≤–∏–ª—å–Ω–µ —ñ–º'—è —Ñ–∞–π–ª—É
    "original_url": "https://example.com/img.jpg"
}
```

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª—é–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å –∑–æ–±—Ä–∞–∂–µ–Ω—å**

**–°–∏–º–ø—Ç–æ–º–∏:**
- –û–¥–Ω–µ –π —Ç–µ –∂ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤
- –ü–æ–≤—ñ–ª—å–Ω–∏–π —ñ–º–ø–æ—Ä—Ç –≤–µ–ª–∏–∫–∏—Ö –∫–∞—Ç–∞–ª–æ–≥—ñ–≤

**–ü—Ä–∏—á–∏–Ω–∞:**
–ö–µ—à –∑–æ–±—Ä–∞–∂–µ–Ω—å –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –Ω–µ –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**‚úÖ –†—ñ—à–µ–Ω–Ω—è:**
```php
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö:
‚úÖ Using cached category image: {
    "original_url": "https://example.com/electronics.jpg",
    "cached_url": "/wp-content/uploads/.../electronics.jpg"
}

// –£—Å–ø—ñ—à–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è:
üé® Downloaded and cached category image: {
    "original_url": "https://example.com/electronics.jpg", 
    "local_url": "/wp-content/uploads/.../electronics.jpg",
    "filename_base": "electronics"
}
```

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –•–∏–±–Ω—ñ —Å–ø—Ä–∞—Ü—å–æ–≤—É–≤–∞–Ω–Ω—è –Ω–∞ —Å—Ç–æ–≤–ø—Ü—è—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —É v1.1.2)**

**–°–∏–º–ø—Ç–æ–º–∏:**
- –°—Ç–æ–≤–ø—Ü—ñ –∑ –Ω–∞–∑–≤–∞–º–∏ `image_description`, `image_width`, `image_size` –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —è–∫ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –ü–æ–≤—ñ–ª—å–Ω–∏–π —ñ–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ —Å–ø—Ä–æ–±–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–ª—è —è–∫ URL –∑–æ–±—Ä–∞–∂–µ–Ω—å
- –ü–æ–º–∏–ª–∫–∏ –≤ –ª–æ–≥–∞—Ö –ø—Ä–æ –Ω–µ–¥—ñ–π—Å–Ω—ñ URL –∑–æ–±—Ä–∞–∂–µ–Ω—å

**–ü—Ä–∏—á–∏–Ω–∞ (–¥–æ v1.1.2):**
```php
// ‚ùå –ü–†–û–ë–õ–ï–ú–ù–ê –ª–æ–≥—ñ–∫–∞ - –∑–∞–Ω–∞–¥—Ç–æ —à–∏—Ä–æ–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞:
if (strpos($catalog_column, 'image_url') !== false || strpos($catalog_column, 'image_') === 0)

// –°–ø—Ä–∞—Ü—å–æ–≤—É–≤–∞–ª–∞ –Ω–∞:
- image_description  ‚Üê –ù–ï –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è!
- image_width       ‚Üê –ù–ï –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è!
- some_image_url_field ‚Üê –ù–ï –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è!
```

**‚úÖ –í–∏—Ä—ñ—à–µ–Ω–Ω—è (v1.1.2+):**
```php
// ‚úÖ –¢–û–ß–ù–ê –ª–æ–≥—ñ–∫–∞ - —Ç—ñ–ª—å–∫–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ —Å—Ç–æ–≤–ø—Ü—ñ –∑–æ–±—Ä–∞–∂–µ–Ω—å:
if ($catalog_column === 'product_image_url' || strpos($catalog_column, 'category_image_') === 0)

// –°–ø—Ä–∞—Ü—å–æ–≤—É—î –¢–Ü–õ–¨–ö–ò –Ω–∞:
- product_image_url     ‚úÖ 
- category_image_1      ‚úÖ
- category_image_2      ‚úÖ  
- category_image_3      ‚úÖ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üöÄ **–®–≤–∏–¥—à–∏–π —ñ–º–ø–æ—Ä—Ç** - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–ª—è
- üéØ **–¢–æ—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞** - —Ç—ñ–ª—å–∫–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è
- üìä **–ß–∏—Å—Ç—ñ—à—ñ –ª–æ–≥–∏** - –Ω–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ –ø—Ä–æ –Ω–µ–¥—ñ–π—Å–Ω—ñ URL

### **üéØ –ü–û–ö–†–ê–©–ï–ù–û —É v1.2.1: –°—Ç–∞–±—ñ–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Ä–µ—Å–∞–π–∑—É**

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞ (–¥–æ v1.2.1):**
```
–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–µ —Ä–µ—Å–∞–π–∑–∏–ª–∏—Å—å, —è–∫—â–æ —ó—Ö —Ä–æ–∑–º—ñ—Ä –±—É–≤ –º–µ–Ω—à–µ 1000x1000px
–ù–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É
```

**–ü—Ä–∏—á–∏–Ω–∞ (—Å—Ç–∞—Ä–∞ –ª–æ–≥—ñ–∫–∞):**
```php
// ‚ùå –ü–†–û–ë–õ–ï–ú–ù–ê –ª–æ–≥—ñ–∫–∞ - —É–º–æ–≤–Ω–∏–π —Ä–µ—Å–∞–π–∑:
if ($current_size['width'] != $target_width || $current_size['height'] != $target_height) {
    $resized = $image_editor->resize($target_width, $target_height, true);
    // ‚Üê –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è 500x500 –ù–ï —Ä–µ—Å–∞–π–∑–∏–ª–æ—Å—å –¥–æ 1000x1000!
}
```

**‚úÖ –í–∏—Ä—ñ—à–µ–Ω–Ω—è —É v1.2.1:**
```php
// ‚úÖ –°–¢–ê–ë–Ü–õ–¨–ù–ê –ª–æ–≥—ñ–∫–∞ - –∑–∞–≤–∂–¥–∏ —Ä–µ—Å–∞–π–∑–∏–º–æ:
CatalogMaster_Logger::info('üé® Processing image', array(
    'current_size' => $current_size['width'] . 'x' . $current_size['height'],
    'target_size' => $target_width . 'x' . $target_height,
    'will_resize' => 'YES (ALWAYS)' // ‚Üê –ó–∞–≤–∂–¥–∏!
));

// Set quality and resize - –ó–ê–í–ñ–î–ò –≤–∏–∫–æ–Ω—É—î–º–æ —Ä–µ—Å–∞–π–∑
$image_editor->set_quality(90);
$resized = $image_editor->resize($target_width, $target_height, true); // true for crop

if (is_wp_error($resized)) {
    CatalogMaster_Logger::error('‚ùå Resize failed', array(
        'error_message' => $resized->get_error_message(),
        'target_size' => $target_width . 'x' . $target_height,
        'original_size' => $current_size['width'] . 'x' . $current_size['height']
    ));
    throw new Exception('–ü–æ–º–∏–ª–∫–∞ –∑–º—ñ–Ω–∏ —Ä–æ–∑–º—ñ—Ä—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è');
}
```

**–ü—Ä–∏–∫–ª–∞–¥–∏ –Ω–æ–≤–æ—ó –ª–æ–≥—ñ–∫–∏:**
```
üìê –°—Ç–∞—Ä–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è 2000x1500 ‚Üí –†–ï–°–ê–ô–ó –¥–æ 1000x1000 ‚úÖ
üìê –°—Ç–∞—Ä–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è 800x600   ‚Üí –†–ï–°–ê–ô–ó –¥–æ 1000x1000 ‚úÖ  
üìê –°—Ç–∞—Ä–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è 1000x1000 ‚Üí –†–ï–°–ê–ô–ó –¥–æ 1000x1000 ‚úÖ
üìê –°—Ç–∞—Ä–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è 300x200   ‚Üí –†–ï–°–ê–ô–ó –¥–æ 1000x1000 ‚úÖ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üìê **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏** - –≤—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≤–∂–¥–∏ 1000x1000px
- üéØ **–ü–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞** - –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É
- üìä **–¢–æ—á–Ω—ñ –ª–æ–≥–∏** - —á—ñ—Ç–∫–æ –ø–æ–∫–∞–∑—É—é—Ç—å –ø—Ä–æ—Ü–µ—Å —Ä–µ—Å–∞–π–∑—É
- ‚úÖ **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - –Ω–µ–º–∞—î –≤–∏–Ω—è—Ç–∫—ñ–≤ –¥–ª—è "–≤–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö" —Ä–æ–∑–º—ñ—Ä—ñ–≤

### **‚úÖ –ù–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è: –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ category_name –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å (v1.1.3+)**

**–¢–µ–ø–µ—Ä —Å–∏—Å—Ç–µ–º–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≥–Ω—É—á–∫–∏–π –º–∞–ø—ñ–Ω–≥ –∑–æ–±—Ä–∞–∂–µ–Ω—å –∫–∞—Ç–µ–≥–æ—Ä—ñ–π:**

**–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç —ñ–º–µ–Ω —Ñ–∞–π–ª—ñ–≤:**
1. **`category_id_1`** (—è–∫—â–æ —î) ‚Üí `electronics.jpg`
2. **`category_name_1`** (—è–∫—â–æ –Ω–µ–º–∞—î ID) ‚Üí `elektronika.jpg` (—Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—è)
3. **Fallback** ‚Üí `category1_123.jpg`

**–ü—Ä–∏–∫–ª–∞–¥–∏ —Ç—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–∞—Ü—ñ—ó:**
```php
"–ï–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∞"           ‚Üí "elektronika.jpg"
"–°–º–∞—Ä—Ç—Ñ–æ–Ω–∏ —ñ –ø–ª–∞–Ω—à–µ—Ç–∏"  ‚Üí "smartfony_i_planshety.jpg"  
"Home & Garden"         ‚Üí "home_garden.jpg"
"–ê–≤—Ç–æ-–º–æ—Ç–æ"             ‚Üí "avto_moto.jpg"
"Beauty & Health"       ‚Üí "beauty_health.jpg"
```

**–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –º–æ–≤–∏:**
- üá∫üá¶ **–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞** - –ø–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ (—ñ, —ó, —î, “ë)
- üá∑üá∫ **–†–æ—Å—ñ–π—Å—å–∫–∞** - –ø–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ 
- üá¨üáß **English** - –ø—Ä—è–º–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
- üåç **–Ü–Ω—à—ñ** - –±–µ–∑–ø–µ—á–Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ –ª–æ–≥–∏:**
```php
üñºÔ∏è Processing category image: {
    "category_id_key": "category_id_1",
    "category_name_key": "category_name_1", 
    "category_id_raw": "",                    // ‚Üê –ü–æ—Ä–æ–∂–Ω—ñ–π
    "category_name_raw": "–ï–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∞",       // ‚Üê –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
    "filename_base": "elektronika",           // ‚Üê –¢—Ä–∞–Ω—Å–ª—ñ—Ç–µ—Ä–æ–≤–∞–Ω–æ
    "original_url": "https://example.com/img.jpg"
}
```

---

## üéâ **–ü—ñ–¥—Å—É–º–æ–∫ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π v1.2.1**

### **üéØ –ö–ª—é—á–æ–≤—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è**
- **üìê –°—Ç–∞–±—ñ–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞** - –∑–∞–≤–∂–¥–∏ 1000x1000px –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤—Ö—ñ–¥–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É
- **üõ°Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–∞ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å—ñ E_ERROR –ø–æ–º–∏–ª–∫–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- **üß™ –í–±—É–¥–æ–≤–∞–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤ WordPress –∞–¥–º—ñ–Ω
- **‚ö° –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - fallback –º–µ—Ö–∞–Ω—ñ–∑–º–∏ —Ç–∞ —Ä–æ–∑—É–º–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è

### **üöÄ –ü–µ—Ä–µ–≤–∞–≥–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**
- **üìä –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å** - –≤—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ä–æ–∑–º—ñ—Ä —Ç–∞ —è–∫—ñ—Å—Ç—å
- **üîç –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å** - –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ —Ç–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤
- **üõ†Ô∏è –ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
- **üíæ –ï–∫–æ–Ω–æ–º—ñ—è —Ä–µ—Å—É—Ä—Å—ñ–≤** - —Ä–æ–∑—É–º–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π

### **üîß –¢–µ—Ö–Ω—ñ—á–Ω–∞ –¥–æ—Å–∫–æ–Ω–∞–ª—ñ—Å—Ç—å**
- **–ë–µ–∑–ø–µ—á–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö** - –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—ó
- **Fallback —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó** - —Ä–µ–∑–µ—Ä–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ –ø—Ä–∏ –∑–±–æ—è—Ö
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –≤–±—É–¥–æ–≤–∞–Ω—ñ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- **–î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** - –ø–æ–≤–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

---

> üé® **–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å Catalog Master v1.2.1** - —Ü–µ **–Ω–∞–π—Å—Ç–∞–±—ñ–ª—å–Ω—ñ—à–∞ —Ç–∞ –Ω–∞–π–Ω–∞–¥—ñ–π–Ω—ñ—à–∞** —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–ª—è WordPress –∫–∞—Ç–∞–ª–æ–≥—ñ–≤ –∑ **–ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ—é —è–∫—ñ—Å—Ç—é** —Ç–∞ **zero-error –≥–∞—Ä–∞–Ω—Ç—ñ—î—é**! 